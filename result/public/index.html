<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Voting Results - {{hostname}}</title>
  <base href="/index.html">
  <meta name = "viewport" content = "width=device-width, initial-scale = 1.0">
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .container {
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      max-width: 600px;
      width: 90%;
    }
    h1 {
      text-align: center;
      color: #333;
      font-size: 2.5em;
      margin-bottom: 30px;
    }
    .vote-option {
      margin: 30px 0;
    }
    .vote-label {
      font-size: 1.5em;
      font-weight: bold;
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .vote-count {
      font-size: 1.2em;
      color: #666;
    }
    .progress-bar {
      width: 100%;
      height: 40px;
      background: #e0e0e0;
      border-radius: 20px;
      overflow: hidden;
      position: relative;
    }
    .progress-fill {
      height: 100%;
      transition: width 0.5s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 1.1em;
    }
    .progress-a {
      background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
    }
    .progress-b {
      background: linear-gradient(90deg, #fa709a 0%, #fee140 100%);
    }
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    .vote-option:hover {
      animation: pulse 0.5s ease;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üèÜ Voting Results üèÜ</h1>
    
    <div class="vote-option">
      <div class="vote-label">
        <span id="choice-a">{{optionA}}</span>
        <span class="vote-count" id="votes-a">0 votes</span>
      </div>
      <div class="progress-bar">
        <div class="progress-fill progress-a" id="progress-a" style="width: 0%">
          <span id="percent-a">0%</span>
        </div>
      </div>
    </div>

    <div class="vote-option">
      <div class="vote-label">
        <span id="choice-b">{{optionB}}</span>
        <span class="vote-count" id="votes-b">0 votes</span>
      </div>
      <div class="progress-bar">
        <div class="progress-fill progress-b" id="progress-b" style="width: 0%">
          <span id="percent-b">0%</span>
        </div>
      </div>
    </div>

    <p style="text-align: center; color: #666; margin-top: 30px;">
      Hostname: {{hostname}}
    </p>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    var socket = io();
    socket.on('message', function(msg) {
      var data = JSON.parse(msg);
      var a = parseInt(data.a || 0);
      var b = parseInt(data.b || 0);
      var total = a + b;
      
      var percentA = total > 0 ? Math.round((a / total) * 100) : 0;
      var percentB = total > 0 ? Math.round((b / total) * 100) : 0;
      
      document.getElementById('votes-a').textContent = a + ' votes';
      document.getElementById('votes-b').textContent = b + ' votes';
      document.getElementById('progress-a').style.width = percentA + '%';
      document.getElementById('progress-b').style.width = percentB + '%';
      document.getElementById('percent-a').textContent = percentA + '%';
      document.getElementById('percent-b').textContent = percentB + '%';
    });
  </script>
</body>
</html>